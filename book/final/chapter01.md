# 第1章：Xアルゴリズムの全体像を理解しよう

## カフェでの出会い

東京の小さなカフェ。大学生の太郎は、ノートパソコンを前にため息をついていた。

太郎「はぁ...今日も投稿したのに、いいね3つだけか...」

隣の席から声がかかる。

あきらパパ「君、Xで悩んでるみたいだね。」

太郎「え？あ、はい...すみません、独り言が聞こえちゃいましたか？」

あきらパパ「実は私、IT企業でエンジニアをしている者でね。最近、Xがアルゴリズムを公開したのを知ってるかい？」

太郎「アルゴリズム？なんか難しそうですね...」

あきらパパ「ははは、大丈夫。私も2人の子供に説明する機会があってね、分かりやすく説明するのは得意なんだ。良かったら、なぜ君の投稿が埋もれてしまうのか、その仕組みを教えてあげようか？」

太郎「本当ですか！？ぜひお願いします！僕、太郎って言います。」

あきらパパ「私は、みんなからあきらパパって呼ばれているよ。よろしく、太郎君。」

## For Youタイムラインの驚くべき仕組み

あきらパパ「太郎君、まず知っておいてほしいのは、Xの『For You』タイムラインには、毎秒何百万もの投稿が候補として挙がっているということなんだ。」

太郎「え！？そんなにたくさん！？」

あきらパパ「そう。その中から、君のタイムラインに表示される投稿は、せいぜい数十件。つまり、99.99%以上の投稿は表示されないんだ。」

太郎「そんな...じゃあ、僕の投稿が表示される確率って、宝くじみたいなものですか？」

あきらパパ「いや、実は違うんだ。これは運じゃなくて、ちゃんとした『科学』なんだよ。Xは『多段階パイプライン』という仕組みを使っているんだ。」

あきらパパはノートを取り出し、図を描き始めた。

```
[投稿の旅路]
1. 候補生成（Candidate Generation）
   ↓ 数百万の投稿から数千に絞る
2. 特徴抽出（Feature Hydration）
   ↓ 約6000の特徴を分析
3. ランキング（Ranking）
   ↓ スコアを計算して順位付け
4. フィルタリング（Filtering）
   ↓ 不適切なものを除外
5. ミキシング（Mixing）
   ↓ 広告などと混ぜる
6. 表示（Serving）
   → ユーザーのタイムラインへ！
```

太郎「うわー、こんなに段階があるんですか！」

## In-NetworkとOut-of-Network：2つの世界

あきらパパ「太郎君、君がフォローしている人は何人くらい？」

太郎「えーと、300人くらいです。」

あきらパパ「その300人の投稿を『In-Network』、それ以外の世界中の投稿を『Out-of-Network』って呼ぶんだ。実は、For Youタイムラインの約50%はIn-Network、残り50%はOut-of-Networkから選ばれているんだよ。」

太郎「へー！フォローしてない人の投稿も半分も入ってるんですか！」

あきらパパ「そうなんだ。In-Networkの投稿は『Earlybird』という検索エンジンが管理していて、リアルタイムで最新の投稿をインデックス化している。一方、Out-of-Networkは『Tweet Mixer』という別のシステムが、様々な方法で面白そうな投稿を探してくるんだ。」

太郎「なるほど...でも、どうやって『面白そう』って判断するんですか？」

## 6000の特徴量：投稿の価値を測る物差し

あきらパパ「ここが面白いところでね、Xは1つの投稿に対して、なんと約6000もの『特徴』を分析しているんだ。」

太郎「ろ、6000！？何をそんなに見てるんですか？」

あきらパパ「例えばね...」

あきらパパは指を折りながら説明を始めた。

1. **投稿者の特徴**（約1500個）
   - フォロワー数、フォロー数
   - 過去の投稿のエンゲージメント率
   - アカウントの信頼性スコア（TweepCred）
   - 最近の活動頻度

2. **投稿内容の特徴**（約2000個）
   - 文字数、使用言語
   - ハッシュタグの有無と種類
   - メディア（画像・動画）の有無
   - URLの有無
   - 話題のトピックとの関連性

3. **ユーザーとの関係性**（約1500個）
   - 過去のやり取りの頻度
   - 共通のフォロワー数
   - 興味・関心の類似度（SimClusters）
   - 地理的な近さ

4. **タイミングの特徴**（約1000個）
   - 投稿からの経過時間
   - ユーザーの通常の利用時間帯
   - 曜日や時間帯の傾向

太郎「すごい...こんなに細かく見てるんですね。」

あきらパパ「これらの特徴を使って、『Heavy Ranker』という機械学習モデルが、その投稿を君が気に入る確率を計算するんだ。」

## Light RankerとHeavy Ranker：2段階の審査

太郎「Heavy Rankerって、重そうな名前ですね。」

あきらパパ「その通り！実は計算が重いから、全ての投稿に使うわけにはいかないんだ。だから、まず『Light Ranker』で大まかにふるいにかけてから、残った候補だけをHeavy Rankerで詳しく評価するんだよ。」

太郎「なるほど、予選と本選みたいな感じですか？」

あきらパパ「まさにその通り！Light Rankerは単純だけど高速、Heavy Rankerは複雑だけど正確。この組み合わせで、リアルタイムに最適な投稿を選んでいるんだ。」

## Home Mixer：最終的な演出家

あきらパパ「そして最後に、『Home Mixer』というシステムが、選ばれた投稿を最終的にアレンジするんだ。」

太郎「アレンジ？」

あきらパパ「例えば、同じ人の投稿が連続しないようにしたり、広告を適切な位置に挿入したり、『○○さんがいいねしました』みたいな文脈を追加したりね。」

太郎「あー、確かにタイムラインって、いろんな種類の投稿がバランスよく並んでますよね。」

あきらパパ「そう、それもアルゴリズムの仕事なんだ。多様性を保ちながら、君が最も興味を持ちそうな順番で表示している。」

## 実践：自分の投稿を分析してみよう

太郎「すごく勉強になりました！でも、これを知って、どう活用すればいいんですか？」

あきらパパ「いい質問だね。まず、君の投稿がどの段階で落とされているか考えてみよう。」

あきらパパは太郎のX画面を見ながら分析を始めた。

**チェックポイント1：候補生成段階**
- フォロワーが少ない → In-Networkでの露出が限定的
- 対策：まずはフォロワーの質を上げる

**チェックポイント2：特徴抽出段階**
- プロフィールが未完成 → 信頼性スコアが低い
- 対策：プロフィールを充実させる

**チェックポイント3：ランキング段階**
- エンゲージメント率が低い → スコアが上がらない
- 対策：反応を得やすい投稿を研究する

太郎「なるほど！僕の場合、まずプロフィールから改善した方がよさそうですね。」

あきらパパ「その通り。アルゴリズムは『信頼できる良質なアカウント』を優遇するようにできている。まずは基盤を固めることが大切だよ。」

## まとめ：アルゴリズムは敵じゃない

太郎「今まで、アルゴリズムって何か得体の知れない敵みたいに思ってました。」

あきらパパ「多くの人がそう思っているけど、実はアルゴリズムは『ユーザーが見たいものを見せる』ために設計されているんだ。つまり、価値のあるコンテンツを作れば、必ず評価される仕組みになっている。」

太郎「価値のあるコンテンツ...」

あきらパパ「そう。次回は、その『価値』をアルゴリズムがどう測っているか、特に『エンゲージメントシグナル』について詳しく話そう。いいねとリツイートと返信、実はそれぞれ全然違う重みがあるんだよ。」

太郎「え！？そうなんですか！次回も絶対聞きたいです！」

あきらパパ「じゃあ、来週の同じ時間にここで会おう。それまでに、今日学んだことを意識して投稿してみてごらん。きっと変化が見えるはずだよ。」

---

### 今日のポイント

1. **For Youタイムラインは6段階の処理を経て作られる**
2. **In-Network（フォロー中）とOut-of-Network（フォロー外）は50:50**
3. **約6000の特徴量で投稿の価値を判断**
4. **Light RankerとHeavy Rankerの2段階評価**
5. **Home Mixerが最終的な見せ方を決定**

### 実践課題

- プロフィールを充実させる（特に自己紹介文）
- フォロワーとの関係性を意識した投稿をする
- 投稿時間帯を記録して、反応の違いを観察する

次章では、エンゲージメントの種類による違いと、それをどう活用するかを学びます。